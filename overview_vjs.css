/* ============ Base ============ */
*,
*::before,
*::after {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  padding: 0;
}

/* overview ベース */
:root {
  --bar-h: 72px;
  --gutter: clamp(3px, 2vw, 5px);
}

body {
  font-family: system-ui, -apple-system, "Helvetica Neue", Arial, sans-serif;
  color: #111;
  background: #d20606; /* overview と同じ赤 */
  overflow-x: hidden;
}

/* ============ Top bar ============ */
.topbar {
  position: relative;
  top: 0;
  z-index: 10;
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  gap: 12px;
  padding: 10px var(--gutter);
  min-height: var(--bar-h);
}

.brand {
  display: flex;
  flex-direction: column;
  line-height: 1.2;
  position: fixed;
}

.brand .artist {
  font-weight: 700;
  font-size: 18px;
}

.brand .role {
  font-weight: 600;
  font-size: 12px;
  letter-spacing: .05em;
}

.toplinks {
  position: fixed;
  top: 28px;
  right: 10px;
}

.toplinks a {
  font-size: 12px;
  font-weight: 600;
  color: inherit;
  text-decoration: none;
}

.toplinks a:hover {
  opacity: .8;
}







/* ============ Layout wrapper ============ */
.page {
  padding: 0 var(--gutter) var(--gutter);
}

/* ============ Grid (justified-layout 用) ============ */
#grid {
  position: relative;
  width: 100%;
  margin: 8px 0 25px;

  opacity: 0;
  pointer-events: none;
}



/* ★ JS で body に .jl-ready が付いたら表示 */
body.jl-ready #grid {
  opacity: 1;
  pointer-events: auto;
  transition: opacity 0.25s ease;
}


/* ============ Items (images & videos) ============ */
/* 各アイテム（画像・動画共通） */
.jl-item {
  position: absolute;
  margin: 0;
  overflow: hidden;
}

/* 中身（画像・動画）はボックスにフィット */
.jl-item img,
.jl-item video {
  display: block;
  width: 100%;
  height: 100%;
  object-fit: cover; /* data-w/data-h が実際の比率と合っていればほぼトリミングなし */
}



/* ============ Hover caption & group highlight ============ */
/* キャプション共通スタイル */
.ov-cap {
  position: absolute;
  left: 4px;
  top: 2px;
  color: #000;
  font-size: 0.6rem;
  font-family: inherit;
  font-style: normal;
  opacity: 0;
  pointer-events: none;
  max-width: 80%;
  line-height: 1.3;
}

.ov-cap em,
.ov-cap i {
  display: block;
  opacity: 0.9;
  font-style: normal;  /* 斜体オフ */
  font-weight: 600;
}

.ov-cap b,
.ov-cap strong {
  font-weight: 600;
  font-style: normal;
}

/* PC: グループ hover 時のオーバーレイ & キャプション表示 */
@media (hover: hover) and (pointer: fine) {

  /* グループに属するサムネだけ白オーバーレイ */
  #grid.is-group-hover .jl-item.is-in-group::after {
    content: "";
    position: absolute;
    inset: 0;
    background: rgba(255, 255, 255, 0.763);
    pointer-events: none;
    z-index: 1;
  }

  /* グループの先頭のサムネだけキャプションを表示 */
  #grid.is-group-hover .jl-item[data-head="1"].is-in-group .ov-cap {
    opacity: 1;
    z-index: 2; /* オーバーレイより前 */
  }
}

/* モバイル: 1回タップでキャプション表示、グループをハイライト */
/* グループの先頭サムネだけキャプション表示（タップ中のグループ） */
#grid.is-group-tap .jl-item[data-head="1"].is-in-group .ov-cap {
  opacity: 1;
  z-index: 2; /* オーバーレイより前 */
}

/* is-in-group が付いたサムネだけ半透明オーバーレイ */
#grid.is-group-tap .jl-item.is-in-group::after {
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(255, 133, 133, 0.763);
  pointer-events: none;
  z-index: 1;
}

/* キャプションは常にオーバーレイより前 */
#grid .ov-cap {
  position: absolute;
  z-index: 2;
}










/* ============ Fullscreen for video ============ */
/* フルスクリーン時は必ずオリジナル比率を守る */
.jl-item.is-video video:fullscreen,
.jl-item.is-video video:-webkit-full-screen {
  width: 100%;
  height: 100%;
  object-fit: contain; /* レターボックスでもトリミングしない */
  background: #000;
}

/* ============ Fullscreen button ============ */
.fs-btn {
  position: absolute;
  right: 6px;
  bottom: 6px;
  width: 22px;
  height: 22px;
  border: none;
  background: rgba(0, 0, 0, 0.55);
  border-radius: 4px;
  cursor: pointer;
  outline: none;

  opacity: 0;
  transform: translateY(4px);
  transition: opacity 0.15s ease, transform 0.15s ease;
}

.fs-btn::before {
  content: "⤢"; /* fullscreen アイコン */
  color: #fff;
  font-size: 14px;
  line-height: 22px;
  display: block;
  text-align: center;
  pointer-events: none;
}

/* マウスホバー時だけ表示（PC） */
.jl-item.is-video:hover .fs-btn {
  opacity: 1;
  transform: translateY(0);
}

/* タッチデバイスでは常に表示（hover が無い環境用） */
@media (hover: none) {
  .fs-btn {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ============ Small screen tweaks ============ */
@media (max-width: 480px) {
  .brand .artist {
    font-size: 16px;
  }
}









/* ========== Lightbox: gm (gallery modal) ========== */

.gm[aria-hidden="true"] {
  display: none;
}

.gm {
  position: fixed;
  inset: 0;
  z-index: 9999;
  display: grid;
  place-items: center;

  /* ★ 画面下のキャプション・クローズボタン用スペース */
  --gm-footer-h: 120px;
}

@media (max-width: 767px) {
  .gm {
    --gm-footer-h: 140px;
  }
}


.gm-backdrop {
  position: absolute;
  inset: 0;
  border: 0;
  padding: 0;
  margin: 0;
  background: #d20606; /* overview と同じ赤 */
}

/* hidden が付いたら確実に消す */
.gm-frame img[hidden],
.gm-video-wrap[hidden] {
  display: none !important;
}



/* Frame (画像・動画の枠) */
.gm-frame {
  position: relative;
  width: 98vw;

  height: calc(100vh - var(--gm-footer-h));

  padding: 0;
  box-sizing: border-box;

  display: flex;
  align-items: center;
  justify-content: center;
}


/* ---- iPhone / 小さい画面用：Lightbox のセンター調整 ---- */
@media (max-width: 768px) {


  .gm-caption {
    left: 12px;
    bottom: calc(12px + env(safe-area-inset-bottom));
  }

  .gm-counter {
    right: 14px;
    bottom: calc(28px + env(safe-area-inset-bottom));
  }

  .gm-close {
    right: 12px;
    bottom: calc(12px + env(safe-area-inset-bottom));
  }
}



/* 画像 */
.gm-frame img {
  flex: 0 0 auto;
  display: block;
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  user-select: none;
  -webkit-user-drag: none;
}

/* 動画 wrapper */
/* 中身の video の幅にピッタリ縮むようにする */
.gm-video-wrap {
  position: relative;         /* sv-controls の基準 */
  flex: 0 0 auto;
  display: inline-flex;       /* ★ 幅 = 子要素（video）の幅 */
  align-items: center;
  justify-content: center;
}

/* 動画本体 */
.gm-video-wrap video {
  display: block;
  max-width: 90vw;
  max-height: 90vh;
  object-fit: contain;
}






/* ===== caption & text ===== */
.gm-caption {
  position: absolute;
  left: 10px;
  bottom: 10px;
  color: #000000;
  pointer-events: none;
  text-align: left;
}

.gm-ttl {
  margin: 0;
  font-weight: 400;
  font-size: .8rem;
}

.gm-sub {
  margin: 0;
  font-weight: 400;
  font-size: .8rem;
}

.gm-name .gm-main {
  font-weight: 700;
  font-size: .9rem;
  letter-spacing: 0.05em;
}

.gm-name .gm-subtitle {
  font-weight: 700;
  font-size: .7rem;
  letter-spacing: 0.04em;
}

/* counter (右下) */
.gm-counter {
  position: absolute;
  right: 15px;
  bottom: 30px;
  color: #000000;
  font-weight: 400;
  font-size: .8rem;
  letter-spacing: .04em;
  display: none;
}

/* close button */
.gm-close {
  position: absolute;
  right: 10px;
  bottom: 10px;
  border: 0;
  background: transparent;
  color: #000000;
  font-size: .8rem;
  font-weight: 400;
  z-index: 10;
}

/* click zones */
.gm-hit {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 50vw;
  height: 100vh;
  border: 0;
  background: transparent;
  cursor: pointer;

  z-index: 5;   /* ★ 追加：動画(z=20)より低くする */
}


.gm-prev { left: 0; }
.gm-next { right: 0; }

/* prevent iOS tap highlight */
.gm-hit,
.gm-close,
.gm-backdrop {
  -webkit-tap-highlight-color: transparent;
  outline: none;
  user-select: none;
  -webkit-user-select: none;
}

/* modal open: disable scroll */
.gm[aria-hidden="false"] {
  position: fixed;
  inset: 0;
  overflow: hidden !important;
  overscroll-behavior: contain !important;
  touch-action: none !important;
  -webkit-overflow-scrolling: auto !important;
}

.gm-frame,
.gm-caption {
  overscroll-behavior: contain !important;
  touch-action: none !important;
  -webkit-overflow-scrolling: auto !important;
}




















/* ====== Custom video controls (sv) ====== */

/* 動画のラッパー */
.gm-video-wrap {
  position: relative;         /* sv-controls の基準 */
  flex: 0 0 auto;
  display: inline-flex;       /* ★ 幅 = 子要素（video）の幅 */
  align-items: center;
  justify-content: center;

  z-index: 20;                /* ★ 追加：動画 & コントロールをヒットゾーンより上に */
}


.sv-controls {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;            /* ← 動画の中 下寄せ */
  padding: 12px 14px;
  
  display: flex;
  flex-direction: column;
  gap: 6px;

  opacity: 0;           /* ★ 追加：初期状態では非表示 */
  pointer-events: none; /* 透明の間はクリック不可にする */
  transition: opacity .25s ease;
  z-index: 10;

  background: linear-gradient(to top, rgba(0,0,0,0.35), rgba(0,0,0,0));
  border-radius: 0 0 6px 6px;
}


/* PC：ホバーで表示 */
.gm-video-wrap:hover .sv-controls {
  opacity: 1;
  pointer-events: auto;
}

/* スマホ：タップで .show-controls クラスを付けて表示（JS が付ける） */
.gm-video-wrap.show-controls .sv-controls {
  opacity: 1;
  pointer-events: auto;
}


/* いまは is-visible は使わないが、将来用に残しておく */
.sv-controls.is-visible {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

/* プログレスバー */
.sv-progress {
  position: relative;
  height: 6px;
  background: rgba(0, 0, 0, 0.3);
  overflow: hidden;
  cursor: pointer;
}

.sv-progress__bar {
  position: absolute;
  inset: 0;
  transform-origin: left center;
  transform: scaleX(0);
  background: #000;
}

/* ボタン行 */
.sv-nav {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

/* ボタン共通 */
.sv-btn {
  border: none;
  background: transparent;
  color: #000;
  font-size: 11px;
  letter-spacing: 0.06em;
  padding: 4px 0;
  cursor: pointer;
}


/* モバイルでも少し余裕を */
@media (max-width: 480px) {
  .sv-controls {
    padding: 8px 12px;
  }
}
